<?xml version="1.0" encoding="us-ascii"?>
<!--?xml-stylesheet type="text/xsl" href="http://ilcsoft.desy.de/marlin/marlin.xsl"?-->

<marlin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ilcsoft.desy.de/marlin/marlin.xsd">


  <execute>
    <XXprocessor name="MyEventSelector"/>
    <XXif condition="MyEventSelector">
    </XXif>

    <processor name="MyAIDAProcessor" />

    <!-- ========== track digitization and tracking  =======================================  -->
     <processor name="VXDPlanarDigiProcessor"/>
     <processor name="SITPlanarDigiProcessor"/>
     <processor name="SITSpacePointBuilder" />
     <processor name="FTDPixelPlanarDigiProcessor"/>
     <processor name="FTDStripPlanarDigiProcessor"/>
     <processor name="FTDSpacePointBuilder"/>
     
     <processor name="MyTPCDigiProcessor"/>

    <processor name="MyClupatraProcessor" />

    <processor name="ClupatraMCTruthLinker" />
    <processor name="clupaeff" type="TrackEfficiency"/>
    <!--processor name="TruthCheck" /-->

<!--
    <XXXprocessor name="MySiliconTracking_MarlinTrk"/>
    <XXXprocessor name="MyFullLDCTracking_MarlinTrk"/>
-->
    <XXXprocessor name="MyTruthTracker" />

    <processor name="MyCEDViewer" />

    <XXXprocessor name="MyRefitProcessor"  />

    <processor name="MyLCIOOutputProcessor" />
    <XXXprocessor name="DebugOutput"/>
  </execute>

  <global>
    <parameter name="LCIOInputFiles"> recfile_ild01.slcio </parameter>
    <parameter name="GearXMLFile" value="gear_ILD_o1_v05.xml" />
    <parameter name="MaxRecordNumber" value="0" />
    <parameter name="SkipNEvents" value="0" /> 
    <parameter name="SupressCheck" value="false true false" />
    <parameter name="Verbosity" value="MESSAGE" />
  </global>

  <processor name="MyEventSelector" type="EventSelector">
    <!--EventSelector returns true if given event was specified in EvenList-->
    <!--event list - pairs of Eventnumber RunNumber-->
    <parameter name="EventList" type="IntVec">
      0   0 
    </parameter>
  </processor>


  <processor name="MyAIDAProcessor" type="AIDAProcessor">
    <!--
	Processor that handles AIDA files. Creates on directory per
	processor. Processors only need to create and fill the histograms,
	clouds and tuples. Needs to be the first ActiveProcessor
    -->
    <!-- compression of output file 0: false >0: true (default) -->
    <parameter name="Compress" type="int" value="1" />
    <!-- filename without extension-->
    <parameter name="FileName" type="string" value="clupatra" />
    <!-- type of output file xml (default) or root ( only OpenScientist)-->
    <parameter name="FileType" type="string" value="root" />
  </processor>

  
 <processor name="VXDPlanarDigiProcessor" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <parameter name="IsStrip" type="bool">false </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float"> 0.0028 0.006 0.004 0.004 0.004 0.004 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float"> 0.0028 0.006 0.004 0.004 0.004 0.004  </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">VXDCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">VXDTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">VXDTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG</parameter-->

 </processor>

 <processor name="SITPlanarDigiProcessor" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <parameter name="IsStrip" type="bool">true </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float">0.007 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float">0 </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">SITCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">SITTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">SITTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>

 <processor name="SITSpacePointBuilder" type="SpacePointBuilder">
   <!--SpacePointBuilder combine si-strip measurements into 3D spacepoints (1TrackerHitPlanar+1TrackHitPlanar = 1 TrackerHit), that can be used by reconstruction-->
   <!--Name of the SpacePoint SimTrackerHit relation collection-->
   <parameter name="SimHitSpacePointRelCollection" type="string" lcioOutType="LCRelation"> SITSpacePointRelations </parameter>
   <!--SpacePointsCollection-->
   <parameter name="SpacePointsCollection" type="string" lcioOutType="TrackerHit"> SITSpacePoints </parameter>
  <!--TrackerHitCollection-->
  <parameter name="TrackerHitCollection" type="string" lcioInType="TrackerHitPlane"> SITTrackerHits </parameter>
  <!--The name of the input collection of the relations of the TrackerHits to SimHits-->
  <parameter name="TrackerHitSimHitRelCollection" type="string" lcioInType="LCRelation"> SITTrackerHitRelations </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
</processor>

 <processor name="FTDStripPlanarDigiProcessor" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <parameter name="IsStrip" type="bool">true </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float">0.01 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float">0.0 </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">FTD_STRIPCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">FTDStripTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">FTDStripTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>

 <processor name="FTDPixelPlanarDigiProcessor" type="PlanarDigiProcessor">
   <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
   <!--whether hits are 1D strip hits-->
   <parameter name="IsStrip" type="bool">false </parameter>
   <!--resolution in direction of u-->
   <parameter name="ResolutionU" type="float">0.01 </parameter>
   <!--resolution in direction of v-->
   <parameter name="ResolutionV" type="float">0.01 </parameter>
   <!--Name of the Input SimTrackerHit collection-->
   <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">FTD_PIXELCollection </parameter>
   <!--Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">FTDPixelTrackerHitRelations </parameter>
   <!--Name of the TrackerHit output collection-->
   <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">FTDPixelTrackerHits </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>

 <processor name="FTDSpacePointBuilder" type="SpacePointBuilder">
   <!--SpacePointBuilder combine si-strip measurements into 3D spacepoints (1TrackerHitPlanar+1TrackHitPlanar = 1 TrackerHit), that can be used by reconstruction-->
   <!--Name of the SpacePoint SimTrackerHit relation collection-->
   <parameter name="SimHitSpacePointRelCollection" type="string" lcioOutType="LCRelation">FTDSpacePointRelations </parameter>
   <!--SpacePointsCollection-->
   <parameter name="SpacePointsCollection" type="string" lcioOutType="TrackerHit">FTDSpacePoints </parameter>                                                              
   <!--TrackerHitCollection-->
   <parameter name="TrackerHitCollection" type="string" lcioInType="TrackerHitPlane">FTDStripTrackerHits </parameter>
   <!--The name of the input collection of the relations of the TrackerHits to SimHits-->
   <parameter name="TrackerHitSimHitRelCollection" type="string" lcioInType="LCRelation">FTDStripTrackerHitRelations </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
 </processor>


 <processor name="MyTPCDigiProcessor" type="TPCDigiProcessor">
   <!--Produces TPC TrackerHit collection from SimTrackerHit collection, smeared in RPhi and Z. A search is made for adjacent hits on a pad row, if they are closer in z and r-phi than the steering parameters _doubleHitResRPhi (default value 2.0 mm) and _doubleHitResZ (default value 5.0 mm) they are considered to overlap. Clusters of hits smaller than _maxMerge (default value 3) are merged into a single tracker hit, with the position given as the average poision of the hits in phi and in z. Clusters which have _maxMerge hits or more are determined to be identifiable as multiple hits, and are not added to the tracker hit collection. This of course means that good hits caught up in a cluster of background hits will be lossed.-->
   <!--R-Phi Diffusion Coefficent in TPC-->
   <parameter name="DiffusionCoeffRPhi" type="float">0.025 </parameter>
   <!--Z Diffusion Coefficent in TPC-->
   <parameter name="DiffusionCoeffZ" type="float">0.08 </parameter>
   <!--Defines the minimum distance for two seperable hits in RPhi-->
   <parameter name="DoubleHitResolutionRPhi" type="float">2 </parameter>
   <!--Defines the minimum distance for two seperable hits in Z-->
   <parameter name="DoubleHitResolutionZ" type="float">5 </parameter>
   <!--Defines spatial slice in RP-->
   <parameter name="HitSortingBinningRPhi" type="float">2 </parameter>
   <!--Defines spatial slice in Z-->
   <parameter name="HitSortingBinningZ" type="float">5 </parameter>
   <!--Defines the maximum number of adjacent hits which can be merged-->
   <parameter name="MaxClusterSizeForMerge" type="int">3 </parameter>
   <!--Number of Effective electrons per pad in TPC-->
   <parameter name="N_eff" type="int">22 </parameter>
   <!--Pad Phi Resolution constant in TPC-->
   <parameter name="PointResolutionPadPhi" type="float">0.9 </parameter>
   <!--R-Phi Resolution constant in TPC-->
   <parameter name="PointResolutionRPhi" type="float">0.05 </parameter>
   <!--TPC Z Resolution Coefficent independent of diffusion-->
   <parameter name="PointResolutionZ" type="float">0.4 </parameter>
   <!--whether or not to use hits without proper cell ID (pad row)-->
   <parameter name="RejectCellID0" type="int">1 </parameter>
   <!--Name of the LowPt SimTrackerHit collection Produced by Mokka TPC Driver TPC0X-->
   <parameter name="TPCLowPtCollectionName" type="string" lcioInType="SimTrackerHit">TPCLowPtCollection </parameter>
   <!--Name of the default pad-row based SimTrackerHit collection-->
   <parameter name="TPCPadRowHitCollectionName" type="string" lcioInType="SimTrackerHit">TPCCollection </parameter>
   <!--Name of the additional space point collection which provides additional guide hits between pad row centers.-->
   <parameter name="TPCSpacePointCollectionName" type="string" lcioInType="SimTrackerHit">TPCSpacePointCollection </parameter>
   <!--Name of the Output TrackerHit collection-->
   <parameter name="TPCTrackerHitsCol" type="string" lcioOutType="TrackerHit"> TPCTrackerHits </parameter>
   <!--Name of the Name of TrackerHit SimTrackHit relation collection-->
   <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">TPCTrackerHitRelations </parameter>
   <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
   <!--parameter name="Verbosity" type="string"> MESSAGE </parameter-->
 </processor>
  
  <processor name="MyClupatraProcessor" type="ClupatraProcessor">
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">DEBUG5 </parameter>
    
    <!--ClupatraProcessor : nearest neighbour clustering seeded pattern recognition-->
    <!--the maximum chi2-distance for which a hit is considered for merging -->
    <parameter name="Chi2Cut" type="float">100 </parameter>
    <!--optionally create some debug collection with intermediate track segments and used and unused hits-->
    <parameter name="CreateDebugCollections" type="bool"> true  </parameter>
    <!--Cut for distance between hits in mm-->
    <parameter name="DistanceCut" type="float">40 </parameter>
    <!--Cut for max.angle between hits in consecutive layers for seed finding - NB value should be smaller than 1 - default is 0.9999999 !!!-->
    <parameter name="CosAlphaCut" type="float"> 0.9999999 </parameter>
    <!--number of seed finding loops - every loop increased the cut by DistanceCut/NLoopForSeeding-->
    <parameter name="NLoopForSeeding" type="int">4 </parameter>
    <!--allowed fraction of hits in same pad row per track-->
    <parameter name="DuplicatePadRowFraction" type="float">0.1 </parameter>
    <!--Use Energy Loss in Fit-->
    <parameter name="EnergyLossOn" type="bool">false true </parameter>
    <!--the maximum delta Chi2 for which a hit is added to a track segement-->
    <parameter name="MaxDeltaChi2" type="float"> 35 </parameter>
    <!--the maximum number of layers without finding a hit before hit search search is stopped -->
    <parameter name="MaxStepWithoutHit" type="int">6</parameter>
    <!--minimum fraction of layers that have a given multiplicity, when forcing a cluster into sub clusters-->
    <parameter name="MinLayerFractionWithMultiplicity" type="float">0.5 </parameter>
    <!--minimum number of layers that have a given multiplicity, when forcing a cluster into sub clusters-->
    <parameter name="MinLayerNumberWithMultiplicity" type="int">3 </parameter>
    <!--minimum number of hits per cluster-->
    <parameter name="MinimumClusterSize" type="int">6 </parameter>
    <!--Use MultipleScattering in Fit-->
    <parameter name="MultipleScatteringOn" type="bool">false true </parameter>
    <!--number of bins in z over total length of TPC - hits from different z bins are nver merged-->
    <parameter name="NumberOfZBins" type="int">150 </parameter>
    <!--Name of the output collection-->
    <parameter name="OutputCollection" type="string" lcioOutType="Track">ClupatraTracks </parameter>
    <!--number of pad rows used in initial seed clustering-->
    <parameter name="PadRowRange" type="int">15 </parameter>
    <parameter name="TrackEndsOuterCentralDist" type="float">25 </parameter>
    <!--maximum distance in z [mm] from endplate of last hit, such that the track is considered to end at the end -->
    <parameter name="TrackEndsOuterForwardDist" type="float">40 </parameter>
    <!--minimum curvature omega of a track segment for being considered a curler-->
    <parameter name="TrackIsCurlerOmega" type="float">0.001 </parameter>
    <!--maximum radial distance [mm] from inner field cage of first hit, such that the track is considered to start at the beginning -->
    <parameter name="TrackStartsInnerDist" type="float">25 </parameter>
    <!--try to pick up hits from Si-trackers-->
    <parameter name="pickUpSiHits" type="bool"> true  false </parameter>
    <!--name of the SIT hit collections - used to extend TPC tracks if (pickUpSiHits==true)-->
    <parameter name="SITHitCollection" type="string">SITTrackerHits </parameter>
    <!--name of the VXD hit collections - used to extend TPC tracks if (pickUpSiHits==true)-->
    <parameter name="VXDHitCollection" type="string">VXDTrackerHits </parameter>
    
    <!--Smooth All Mesurement Sites in Fit-->
    <parameter name="SmoothOn" type="bool">false </parameter>
    <!--Name of the tpc hit input collections-->
    <parameter name="TPCHitCollection" type="string" lcioInType="TrackerHit">TPCTrackerHits </parameter>
  </processor>
  
  <processor name="ClupatraMCTruthLinker" type="RecoMCTruthLinker">
    <!--Name of the MCParticle input collection-->
    <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <!--Names of the SimTrackerHits input collection-->
    <parameter name="SimTrackerHitCollections" type="StringVec" lcioInType="SimTrackerHit"> TPCCollection </parameter>
        <!--Name of the Tracks input collection-->
    <parameter name="TrackCollection" type="string" lcioInType="Track">ClupatraTracks </parameter>
    <!--Name of the trackMCTruthLink output collection-->
    <parameter name="TrackMCTruthLinkName" type="string" lcioOutType="LCRelation">ClupatraMCTruthLink </parameter>
    <!--Name of the MCParticle to Track relation output collection - not created if empty()-->
    <parameter name="MCTruthTrackLinkName" type="string" lcioOutType="LCRelation"> MCTruthClupatraLink</parameter>
    <!--Name of the  SimTrackerHit - TrackerHit relation-->
    <parameter name="TPCTrackerHitRelInputCollection" type="string" lcioInType="LCRelation">TPCTrackerHitRelations </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> MESSAGE DEBUG3 </parameter>
 </processor>
  
 <processor name="clupaeff" type="TrackEfficiency">
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> DEBUG3 MESSAGE DEBUG3 </parameter>
   <parameter name="MCParticlesCollection" type="string" lcioInType="MCParticle">MCParticle</parameter>
   <parameter name="TrackMCPRelation" type="string" lcioInType="LCRelation"> ClupatraMCTruthLink </parameter>
   <parameter name="PtRange" type="FloatVec">0. 100.</parameter>
   <parameter name="TrackCollection" type="string" lcioInType="Track">ClupatraTracks</parameter>
   <parameter name="SimTrackerHitCollection" type="string" lcioInType="SimTrackerHit">TPCCollection </parameter>
 </processor>
 
  <processor name="TruthCheck" type="TrackCheckMCTruth">
    <!--TrackCheckMCTruth: analysis plots for Tracks-->
    <!--maximal fractions of hits that are allowed to be missing for a merged track-->
    <parameter name="HitFractionMerged" type="float">0.05 </parameter>
    <!--maximal fractions of hits that are allowed to be missing for a split track-->
    <parameter name="HitFractionSplit" type="float">0.05 </parameter>
    <!--Name of the input collections with MCParticles-->
    <parameter name="MCParticlesCollection" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <!--Name of the output collections with merged Tracks-->
    <parameter name="MergedTrackCollection" type="string" lcioOutType="Track">ClupatraMergedTracks </parameter>
    <!--Name of the MCParticle to Track relation output collection - not created if empty()-->
    <parameter name="MCPTrackRelation" type="string" lcioOutType="LCRelation"> MCTruthClupatraLink</parameter>
    <!--Min and max value of pt range [GeV]-->
    <parameter name="PtRange" type="FloatVec">0 1000  </parameter>
    <!--Name of the input collections with SimTrackerHits-->
    <parameter name="SimTrackerHitCollection" type="StringVec" lcioInType="SimTrackerHit">TPCCollection  </parameter>
    <!--Name of the output collections with split Tracks-->
    <parameter name="SplitTrackCollection" type="string" lcioOutType="Track">ClupatraSplitTracks </parameter>
    <!--Name of the input collections with  Tracks-->
    <parameter name="TrackCollection" type="string" lcioInType="Track">ClupatraTracks </parameter>
    <!--Name of the input collections with LCRelation Tracks to MCParticles-->
    <parameter name="TrackMCPRelation" type="string" lcioInType="LCRelation">ClupatraMCTruthLink </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> MESSAGE </parameter>
  </processor>
  
  <processor name="MySiliconTracking_MarlinTrk" type="SiliconTracking_MarlinTrk">
    <!--Pattern recognition in silicon trackers-->
    <!--Angle Cut For Merging-->
    <parameter name="AngleCutForMerging" type="float">0.1 </parameter>
    <!--Check for Delta rays hits in hit-to-track assignment-->
    <parameter name="CheckForDelta" type="int">1 </parameter>
    <!--Chi2 Fit Cut-->
    <parameter name="Chi2FitCut" type="float">120 </parameter>
    <!--Chi2 Prefit Cut-->
    <parameter name="Chi2PrefitCut" type="float">1e+10 </parameter>
    <!--Chi2WRphiQuartet-->
    <parameter name="Chi2WRphiQuartet" type="float">1 </parameter>
    <!--Chi2WRphiSeptet-->
    <parameter name="Chi2WRphiSeptet" type="float">1 </parameter>
    <!--Chi2WRphiTriplet-->
    <parameter name="Chi2WRphiTriplet" type="float">1 </parameter>
    <!--Chi2WZQuartet-->
    <parameter name="Chi2WZQuartet" type="float">0.5 </parameter>
    <!--Chi2WZSeptet-->
    <parameter name="Chi2WZSeptet" type="float">0.5 </parameter>
    <!--Chi2WZTriplet-->
    <parameter name="Chi2WZTriplet" type="float">0.5 </parameter>
    <!--Create Track To MCP Relations-->
    <parameter name="CreateMap" type="int">1 </parameter>
    <!--cut on D0 for tracks-->
    <parameter name="CutOnD0" type="float">100 </parameter>
    <!--cut on Pt-->
    <parameter name="CutOnPt" type="float">0.05 </parameter>
    <!--cut on Z0 for tracks-->
    <parameter name="CutOnZ0" type="float">100 </parameter>
    <!--Print out debugging info?-->
    <parameter name="Debug" type="int">1 </parameter>
    <!--FTD Hit Collection Name-->
    <parameter name="FTDHitCollectionName" type="string" lcioInType="TrackerHit">FTDTrackerHits </parameter>
    <!--Fast attachment-->
    <parameter name="FastAttachment" type="int">0 </parameter>
    <!--Final Refit ?-->
    <parameter name="FinalRefit" type="int">1 </parameter>
    <!--Combinations of Hits in Layers-->
    <parameter name="LayerCombinations" type="IntVec">6 4 3 6 4 2 6 3 2 5 4 3 5 4 2 5 3 2 5 3 1 5 2 1 4 3 2 4 3 1 4 2 1 3 2 1  </parameter>
    <!--Combinations of Hits in FTD-->
    <parameter name="LayerCombinationsFTD" type="IntVec">6 5 4 6 5 3 5 4 3 5 4 2 5 4 1 5 3 2 5 3 1 5 2 1 4 3 2 4 3 1 4 3 0 4 2 1 4 2 0 4 1 0 3 2 1 3 2 0 3 1 0 2 1 0  </parameter>
    <!--MinDistCutAttach-->
    <parameter name="MinDistCutAttach" type="float">2.5 </parameter>
    <!--Minimal distance of track hit to the delta electron hit-->
    <parameter name="MinDistToDelta" type="float">0.25 </parameter>
    <!--MinLayerToAttach-->
    <parameter name="MinLayerToAttach" type="int">-1 </parameter>
    <!--minimal hits-->
    <parameter name="MinimalHits" type="int">3 </parameter>
    <!--Number of divisions in Phi-->
    <parameter name="NDivisionsInPhi" type="int">80 </parameter>
    <!--Number of divisions in Phi for FTD-->
    <parameter name="NDivisionsInPhiFTD" type="int">30 </parameter>
    <!--Number of divisions in Theta-->
    <parameter name="NDivisionsInTheta" type="int">80 </parameter>
    <!--Option of prefit ?-->
    <parameter name="OptPrefit" type="int">0 </parameter>
    <!--SIT Hit Collection Name-->
    <parameter name="SITHitCollectionName" type="string" lcioInType="TrackerHit">SITTrackerHits </parameter>
    <!--Silicon track Collection Name-->
    <parameter name="SiTrackCollectionName" type="string" lcioOutType="Track">SiTracks </parameter>
    <!--Name of Si track MC particle relation collection-->
    <parameter name="SiTrackMCPRelCollection" type="string" lcioOutType="LCRelation">SiTracksMCP </parameter>
    <!--Simple Helix Fit ?-->
    <parameter name="SimpleHelixFit" type="int">1 </parameter>
    <!--Use Extra Point in Fit-->
    <parameter name="UseExtraPoint" type="int">0 </parameter>
    <!--Use SIT-->
    <parameter name="UseSIT" type="int">1 </parameter>
    <!--VTX Hit Collection Name-->
    <parameter name="VTXHitCollectionName" type="string" lcioInType="TrackerHit">VXDTrackerHits </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
  </processor>

  <processor name="MyFullLDCTracking_MarlinTrk" type="FullLDCTracking_MarlinTrk">
    <!--Performs full tracking in LDC detector-->
    <!--Cut on Opening Angle for forced merging of Si and TPC segments-->
    <parameter name="AngleCutForForcedMerging" type="float">0.05 </parameter>
    <!--Cut on Opening Angle for merging Si and TPC segments-->
    <parameter name="AngleCutForMerging" type="float">0.1 </parameter>
    <!--Assign ETD Hits-->
    <parameter name="AssignETDHits" type="int">1 </parameter>
    <!--Assign left over FTD hits-->
    <parameter name="AssignFTDHits" type="int">1 </parameter>
    <!--Assign SET Hits-->
    <parameter name="AssignSETHits" type="int">1 </parameter>
    <!--Assign left over SIT hits-->
    <parameter name="AssignSITHits" type="int">1 </parameter>
    <!--Assign left over TPC hits-->
    <parameter name="AssignTPCHits" type="int">1 </parameter>
    <!--Assign left over VTX hits-->
    <parameter name="AssignVTXHits" type="int">1 </parameter>
    <!--Cut on fit Chi2-->
    <parameter name="Chi2FitCut" type="float">100 </parameter>
    <!--Cut on fit Chi2-->
    <parameter name="Chi2PrefitCut" type="float">100000 </parameter>
    <!--Create Track to MCP Relations-->
    <parameter name="CreateMap" type="int">1 </parameter>
    <!--Cut on the number of the Si hits for tracks with no TPC hits-->
    <parameter name="CutOnSiHits" type="int">4 </parameter>
    <!--Cut on the number of the TPC hits for tracks with no Si hits-->
    <parameter name="CutOnTPCHits" type="int">35 </parameter>
    <!--Cut on the track parameter D0-->
    <parameter name="CutOnTrackD0" type="float">500 </parameter>
    <!--Cut on the track parameter Z0-->
    <parameter name="CutOnTrackZ0" type="float">500 </parameter>
    <!--Cut on D0 difference for forced merging of Si and TPC segments-->
    <parameter name="D0CutForForcedMerging" type="float">50 </parameter>
    <!--Cut on D0 difference for merging of Si and TPC segments-->
    <parameter name="D0CutForMerging" type="float">500 </parameter>
    <!--Cut on D0 difference for merging TPC segments-->
    <parameter name="D0CutToMergeTPCSegments" type="float">100 </parameter>
    <!--Activate debugging?-->
    <parameter name="Debug" type="int">0 </parameter>
    <!--Cut on dP/P difference for merging TPC segments-->
    <parameter name="DeltaPCutToMergeTPCSegments" type="float">0.1 </parameter>
    <!--ETD Hit Collection Name-->
    <parameter name="ETDHitCollection" type="string" lcioInType="TrackerHit">ETDTrackerHits </parameter>
    <!--Cut on distance between track and ETD hits-->
    <parameter name="ETDHitToTrackDistance" type="float">10 </parameter>
    <!--FTD Hit Collection Name-->
    <parameter name="FTDHitCollection" type="string" lcioInType="TrackerHit">FTDTrackerHits </parameter>
    <!--Cut on distance between track and FTD hits-->
    <parameter name="FTDHitToTrackDistance" type="float">2 </parameter>
    <!--Forbid overlap in Z for combining TPC segments with tracks having Si hits-->
    <parameter name="ForbidOverlapInZComb" type="int">0 </parameter>
    <!--Forbid overlap in Z for the merged TPC segments-->
    <parameter name="ForbidOverlapInZTPC" type="int">0 </parameter>
    <!--Force merging of Si and TPC segments?-->
    <parameter name="ForceSiTPCMerging" type="int">0 </parameter>
    <!--Force merging of TPC Segments?-->
    <parameter name="ForceTPCSegmentsMerging" type="int">1 </parameter>
    <!--LDC track collection name-->
    <parameter name="LDCTrackCollection" type="string" lcioOutType="Track">MarlinTrkTracks </parameter>
    <!--Collection name for the LDC track to MCParticle relations-->
    <parameter name="LDCTrackMCPRelCollection" type="string" lcioOutType="LCRelation">MarlinTrkTracksMCP </parameter>
    <!--Switch on the Material in MaterialDB_F77-->
    <parameter name="MaterialOn" type="bool">true </parameter>
    <!--number of hits for outward extrapolation-->
    <parameter name="NHitsExtrapolation" type="int">35 </parameter>
    <!--Cut on Omega difference for forced merging of Si and TPC segments-->
    <parameter name="OmegaCutForForcedMerging" type="float">0.15 </parameter>
    <!--Cut on Omega difference for merging Si and TPC segments-->
    <parameter name="OmegaCutForMerging" type="float">0.25 </parameter>
    <!--Option for the LDC Track fit-->
    <parameter name="OptFit" type="int">4 </parameter>
    <!--Option for Si tracks refitting-->
    <parameter name="OptFitSi" type="int">2 </parameter>
    <!--Option for TPC tracks refitting-->
    <parameter name="OptFitTPC" type="int">2 </parameter>
    <!--Cut on Pt of tracks for merging TPC segments-->
    <parameter name="PtCutToMergeTPCSegments" type="float">1.2 </parameter>
    <!--Refitted TPC track collection name-->
    <parameter name="ReffitedTPCTrackCollection" type="string" lcioOutType="Track">RefittedTPCTracks </parameter>
    <!--Refit Si Tracks ?-->
    <parameter name="RefitSiTracks" type="int">0 </parameter>
    <!--Refit TPC Tracks ?-->
    <parameter name="RefitTPCTracks" type="int">1 </parameter>
    <!--Refitted Si track collection name-->
    <parameter name="RefittedSiTrackCollection" type="string" lcioOutType="Track">RefittedSiTracks </parameter>
    <!--Collection name for the refittedSi track to MCParticle relations-->
    <parameter name="RefittedSiTrackMCPRelCollection" type="string" lcioOutType="LCRelation">RefittedSiTracksMCP </parameter>
    <!--Collection name for the refitted TPC track to MCParticle relations-->
    <parameter name="RefittedTPCTrackMCPRelCollection" type="string" lcioOutType="LCRelation">RefittedTPCTracksMCP </parameter>
    <!--SET Hit Collection Name-->
    <parameter name="SETHitCollection" type="string" lcioInType="TrackerHit">SETTrackerHits </parameter>
    <!--Cut on distance between track and SET hits-->
    <parameter name="SETHitToTrackDistance" type="float">2 </parameter>
    <!--SIT Hit Collection Name-->
    <parameter name="SITHitCollection" type="string" lcioInType="TrackerHit">SITTrackerHits </parameter>
    <!--Cut on distance between track and SIT hits-->
    <parameter name="SITHitToTrackDistance" type="float">2 </parameter>
    <!--Si Track Collection-->
    <parameter name="SiTracks" type="string" lcioInType="Track">SiTracks </parameter>
    <!--Si Track to Collection-->
    <parameter name="SiTracksMCPRelColl" type="string" lcioInType="LCRelation">SiTracksMCP </parameter>
    <!--Store only hits used in fit?-->
    <parameter name="StoreHitsInFit" type="int">0 </parameter>
    <!--Store Refitted Si Tracks ?-->
    <parameter name="StoreRefittedSiTracks" type="int">0 </parameter>
    <!--Store Refitted TPC Tracks ?-->
    <parameter name="StoreRefittedTPCTracks" type="int">0 </parameter>
    <!--TPC Hit Collection Name-->
    <parameter name="TPCHitCollection" type="string" lcioInType="TrackerHit">TPCTrackerHits </parameter>
    <!--Cut on distance between track and TPC hits-->
    <parameter name="TPCHitToTrackDistance" type="float">15 </parameter>
    <!--TPC Track Collection-->
    <parameter name="TPCTracks" type="string" lcioInType="Track">ClupatraTracks </parameter>
    <!--TPC Track to MCP Relation Collection Name-->
    <parameter name="TPCTracksMCPRelColl" type="string" lcioInType="LCRelation">XTPCTracksMCP </parameter>
    <!--Use Extra Point in Fit-->
    <parameter name="UseExtraPoint" type="int">0 </parameter>
    <!--VTX Hit Collection Name-->
    <parameter name="VTXHitCollection" type="string" lcioInType="TrackerHit">VXDTrackerHits </parameter>
    <!--Cut on distance between track and VTX hits-->
    <parameter name="VTXHitToTrackDistance" type="float">1.5 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <!--parameter name="Verbosity" type="string">DEBUG </parameter-->
    <!--Cut on Z0 difference for forced merging of Si and TPC segments-->
    <parameter name="Z0CutForForcedMerging" type="float">200 </parameter>
    <!--Cut on Z0 difference for merging of Si and TPC segments-->
    <parameter name="Z0CutForMerging" type="float">1000 </parameter>
    <!--Cut on Z0 difference for merging TPC segments-->
    <parameter name="Z0CutToMergeTPCSegments" type="float">5000 </parameter>
    <!--Parameter a to define minimal IP error-->
    <parameter name="aParameterForIPError" type="float">0.002 </parameter>
    <!--Parameter b to define minimal IP error-->
    <parameter name="bParameterForIPError" type="float">0.0076 </parameter>
    <!--Cut on cos theta between the two momentum vectors when considering merger of high Pt tracks-->
    <parameter name="cosThetaCutHighPtMerge" type="float">0.99 </parameter>
    <!--cut on cos theta between the two momentum vectors when considering merger of high Pt tracks for softer dp/p cut-->
    <parameter name="cosThetaCutSoftHighPtMerge" type="float">0.998 </parameter>
    <!--cut on 3D distance between hit and helix extrapolation when considering merger of high Pt tracks-->
    <parameter name="hitDistanceCutHighPtMerge" type="float">25 </parameter>
    <!--cut on maximum fraction of outliers when considering merger of high Pt tracks-->
    <parameter name="maxFractionOfOutliersCutHighPtMerge" type="float">0.95 </parameter>
    <!--cut for max 3D distance between any hit and helix extrapolation when considering merger of high Pt tracks-->
    <parameter name="maxHitDistanceCutHighPtMerge" type="float">50 </parameter>
    <!--cut on dp/p when considering merger of high Pt tracks-->
    <parameter name="momDiffCutHighPtMerge" type="float">0.01 </parameter>
    <!--softer cut on dp/p when considering merger of high Pt tracks-->
    <parameter name="momDiffCutSoftHighPtMerge" type="float">0.25 </parameter>
    <!--Parameter s to define minimal IP error-->
    <parameter name="sParameterForIPError" type="float">0.75 </parameter>
  </processor>

  <processor name="MyTruthTracker" type="TruthTracker">
    <!--Creates Track Collection from MC Truth-->
    <!--Use Energy Loss in Fit-->
    <parameter name="EnergyLossOn" type="bool">true </parameter>
    <!--Name of the collection of FTD tracker hits-->
    <parameter name="FTDCollectionName" type="string" lcioInType="TrackerHit">FTDTrackerHits </parameter>
    <!--Name of the FTD sim trk hit collection-->
    <parameter name="FTDSimTrkhitCollectionName" type="string" lcioInType="SimTrackerHit">FTDCollection </parameter>
    <!--Fit the Tracks with MarlinTrk, otherwise take track parameters from MCParticle-->
    <parameter name="FitTracksWithMarlinTrk" type="bool">true </parameter>
    <!--Momentume Threshold MC particles which will produce tracks GeV-->
    <parameter name="MCpThreshold" type="float">0.1 </parameter>
    <!--Use MultipleScattering in Fit-->
    <parameter name="MultipleScatteringOn" type="bool">true </parameter>
    <!--Name of the output track collection-->
    <parameter name="OutputTrackCollectionName" type="string" lcioOutType="Track"> MarlinTrkTracks </parameter>
    <!--Name of the MCParticle-Track Relations collection for output tracks-->
    <parameter name="OutputTrackRelCollection" type="string" lcioOutType="LCRelation"> MarlinTrkTracksMCP </parameter>
    <!--Name of the collection of SIT tracker hits-->
    <parameter name="SITCollectionName" type="string" lcioInType="TrackerHit">SITTrackerHits </parameter>
    <!--Name of the SIT sim trk hit collection-->
    <parameter name="SITSimTrkhitCollectionName" type="string" lcioInType="SimTrackerHit">SITCollection </parameter>
    <!--Smooth All Mesurement Sites in Fit-->
    <parameter name="SmoothOn" type="bool">false </parameter>
    <!--Name of the collection of TPC tracker hits-->
    <parameter name="TPCCollectionName" type="string" lcioInType="TrackerHit">TPCTrackerHits </parameter>
    <!--Name of the TPC sim trk hit collection-->
    <parameter name="TPCSimTrkhitCollectionName" type="string" lcioInType="SimTrackerHit">TPCCollection </parameter>
    <!--Name of the collection of VTX tracker hits-->
    <parameter name="VTXCollectionName" type="string" lcioInType="TrackerHit">VXDTrackerHits </parameter>
    <!--Name of the VTX sim trk hit collection-->
    <parameter name="VTXSimTrkhitCollectionName" type="string" lcioInType="SimTrackerHit">VXDCollection </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">DEBUG </parameter>
    <!--Print out progress every N events -->
    <parameter name="nEventPrintout" type="int">1000 </parameter>
  </processor>

  <processor name="MyCEDViewer" type="CEDViewer">

    <!--draw a helix for Track objects:0 none, 1: atIP, 2: atFirstHit, 3: atLastHit, 4: atCalorimeter-->
    <parameter name="DrawHelixForTrack" type="int"> 1 </parameter>

    <parameter name="MCParticleEnergyCut" type="float"> .1 </parameter> 
   <!--color scheme to be used for drawing - see MESSAGE for options-->
    <parameter name="ColorScheme" type="int">12</parameter>

    <!--draw detector from GEAR file with given ID (see MarlinCED::newEvent() ) : 0 ILD, -1 none-->
    <parameter name="DrawDetectorID" type="int">0 </parameter>
    
    <!--Wait for Keyboard before proceed-->
    <parameter name="WaitForKeyboard" type="int">1</parameter>

    <!--collection to be displayed ( ColName, marker type[0-2], size, layer)
      PandoraPFOs 0 2 3
      VXDTrackerHits  0 6 4
      SITTrackerHits  0 6 4
      SITSpacePoints  0 6 4

      ClupatraTrackSegments 0 4 6
      ClupatraInitialTrackSegments 0 3 7 

      ClupatraOuterSegments   0 3 3
      ClupatraInnerSegments   0 3 4
      ClupatraMiddleSegments  0 3 5

      VXDTrackerHits  0 6 4
      SITTrackerHits  0 6 4
    -->
    <parameter name="DrawInLayer"> 
      TPCCollection 0 1 0
      TPCTrackerHits 0 2 10

      ClupatraSeedCluster 0 4 1 
      ClupatraLeftoverClusters 0 3 2

      MCParticleTracksFound_clupaeff 0 3 3
      MCParticleTracksNotFound_clupaeff 0 3 4 

      ClupatraIncompleteSegments 0 4 6
      ClupatraCurlerSegments  0 3 7 

      ClupatraUsedTPCHits   0 2  8
      ClupatraUnUsedTPCHits 0 3 9

      ClupatraSplitTracks 0 3 11
      ClupatraMergedTracks 0 3 12

      MCParticle  0 3 15
 
      ClupatraTrackSegments 0 4 16

      ClupatraPoorQualityTracks 0 4 17

      MarlinTrkTracks 2 20 18
      ClupatraTracks 0 6 19

    </parameter>
  </processor>
  
  
  <processor name="MyLCIOOutputProcessor" type="LCIOOutputProcessor">
    <!--
	Writes the current event to the specified LCIO outputfile. Needs to
	be the last ActiveProcessor.
    -->
    <!--drops the named collections from the event-->
    <!--
	parameter name="DropCollectionNames" type="StringVec"> TPCHits
	HCalHits </parameter
    -->
    <!--drops all collections of the given type from the event-->
    <!--
	parameter name="DropCollectionTypes" type="StringVec"> SimTrackerHit
	SimCalorimeterHit </parameter
    -->
    <!--
	write complete objects in subset collections to the file (i.e. ignore
	subset flag)
    -->
    <!--
	parameter name="FullSubsetCollections" type="StringVec"
	value="MCParticlesSkimmed"/
    -->
    <!--
	force keep of the named collections - overrules DropCollectionTypes
	(and DropCollectionNames)
    -->
    <!--
	parameter name="KeepCollectionNames" type="StringVec"
	value="MyPreciousSimTrackerHits"/
    -->
    <!-- name of output file -->
    <parameter name="LCIOOutputFile" type="string" value="outputfile.slcio" />
    <!--write mode for output file:  WRITE_APPEND or WRITE_NEW-->
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW" />
    <!--
	will split output file if size in kB exceeds given value - doesn't
	work with APPEND and NEW
    -->
    <!--parameter name="SplitFileSizekB" type="int" value="1992294"/-->
  </processor>

  <processor name="MyRefitProcessor" type="RefitProcessor">
    <!--RefitProcessor refits an input track collection, producing a new collection of tracks.-->
    <!--Use Energy Loss in Fit-->
    <parameter name="EnergyLossOn" type="bool">false true </parameter>
    <!--Name of the input track collection-->
    <parameter name="InputTrackCollectionName" type="string" lcioInType="Track">ClupatraDebugTracks</parameter>
    
    <!--Name of the MCParticle-Track Relations collection for input tracks-->
    <parameter name="InputTrackRelCollection" type="string" lcioInType="LCRelation">TruthTracksMCP </parameter>
    <!--Use MultipleScattering in Fit-->
    <parameter name="MultipleScatteringOn" type="bool">false true </parameter>
    <!--Name of the output track collection-->
    <parameter name="OutputTrackCollectionName" type="string" lcioOutType="Track">RefittedTracks </parameter>
    <!--Name of the MCParticle-Track Relations collection for output tracks-->
    <parameter name="OutputTrackRelCollection" type="string" lcioOutType="LCRelation">RefittedTracksMCP </parameter>
    <!--Smooth All Mesurement Sites in Fit-->
    <parameter name="SmoothOn" type="bool">false </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">DEBUG </parameter>
  </processor>
  

 <processor name="DebugOutput" type="LCIOOutputProcessor">
    <parameter name="DropCollectionNames" type="StringVec">
      ClupatraUnUsedTPCHits ClupatraUsedTPCHits
   </parameter>

    <parameter name="DropCollectionTypes" type="StringVec">  Track                </parameter>
    <parameter name="KeepCollectionNames" type="StringVec">  ClupatraDebugTracks  </parameter>

    <parameter name="LCIOOutputFile" type="string" value="debug.slcio" />
    <!--write mode for output file:  WRITE_APPEND or WRITE_NEW-->
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW" />
</processor>


</marlin>
